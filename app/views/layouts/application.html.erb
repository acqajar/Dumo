<!DOCTYPE html>
<html>
<head>
  <title> Memento </title>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>
  <script src="assets/typeahead.js"></script>
  <script>
	  $("#query").typeahead({
	    name: "title",
	    remote: "/title/autocomplete?query=%QUERY"
	  });
  </script>
</head>
<body>

	<nav class = "nav navbar navbar-default">
		<div class = "container">
			<div class = "navbar-header">
				<div class = "navbar-brand"> <%= link_to "Memento", pins_path %></div>
			</div>
			  <button type="button" class="navbar-toggle" data-toggle="collapse" 
		         data-target="#example-navbar-collapse">
		         <span class="sr-only">Toggle navigation</span>
		         <span class="icon-bar"></span>
		         <span class="icon-bar"></span>
		         <span class="icon-bar"></span>
		      </button>


		      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
					<% if user_signed_in? %>
					<div class="collapse navbar-collapse" id="myNavbar">
						<ul class = "nav navbar-nav navbar-right">
								<li><%= link_to "New Pin", new_pin_path %></li>
								
								<li class ="dropdown pull-right">
									<a href="#" data-toggle="dropdown" class="dropdown-toggle" role="button" arai-expanded="false"><%=current_user.username%> <b class="caret"></b>
							            <ul class="dropdown-menu">
							                <li role="presentation"><%= link_to "Account Settings", edit_user_registration_path %></li>
							                <li role="presentation"><%= link_to "Sign Out", destroy_user_session_path, method: :delete %></li>
									   </ul>
										   <% if current_user.avatar != nil%>
										   		<li class="round-image-50"><%= image_tag(current_user.avatar.url(:thumb)) %></li>
										   		<%end%>
								</li></a>
						</ul>
							<% else %>
							<ul class = "nav navbar-nav navbar-right">
								<li role="presentation"> <%= link_to "Sign Up", new_user_registration_path %></li>
								<li role="presentation"> <%= link_to "Sign In", new_user_session_path %> </li>
							</ul>
						<% end %>

								<!-- Search the pins model -->
							<%= form_tag search_pins_path, method: :get, class: "navbar-form navbar-right", role: "search" do %>
				          <%= text_field_tag :search, params[:search], class: "form-control", placeholder: "Pin Name" %>
						          <%= text_field_tag :username, params[:user_id], class: "form-control", placeholder: "Username" %> 
						          <%= submit_tag "Search", name: nil, class: "btn btn-default" %>
					    <% end %>	
						</div>				
					</div>


				   
			</div>	



	</nav>


	<div class = "container">
	 <% flash.each do |name, msg| %>
		<%= content_tag(:div, msg, class: "alert alert-info") %>
     <% end %>
 	</div>


<%= yield %>


</body>
</html>
